Java 内存模型

 标签： JVM

---
### 1、运行时数据区域  
    JVM 在运行Java程序时，会将它所管理的内存划分为几个不同的内存区域。分别是：
        1.程序计数器
        2.虚拟机栈
        3.本地方法栈
        4.方法区
        5.堆 
     如下图所示：
     ![JVM内存模型](/img/jvm-memory-model.jpg)
     当然，每一个不同的内存区域都有不同的生命周期；有的是随着JVM的启动和停止而创建和销毁，有的是随着 
     用户线程的启动和结束而创建和销毁。
     
####1.1、程序计数器
        程序计数器是一块比较小的内存区域。它的作用可以看做是线程执行字节码的行号指示器。在JVM的概念模型里，
    字节码解释器就是通过修改该内存区域的值来选取下一条需要执行的代码。所以，代码的分支，循环，跳转和线程 
    恢复等基础功能都依赖于该内存区域。
        在Java的多线程环境里，各线程的执行是通过轮流切换来分配处理器的执行时间。所以在任何一个时间点，一个
    处理器（多核处理的一个内核）只会执行一个线程，这样就会存在线程切换后恢复的问题。所以，每一个线程都需要 
    有一个独立私有的内存区域（线程计数器），并且互不影响。
        此外，程序计数器在执行不同的方法时存储的值是有一定区别的，在执行java方法是存储的是字节码指令的地址， 
    在执行native方法时，存储的是空值（Undefined）。
    ==程序计数器是虚拟机规范中唯一一个没有规定OutOfMemoryError的内存区域==
    
####1.2、虚拟机栈
        
